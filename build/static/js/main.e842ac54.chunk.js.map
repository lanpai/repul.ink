{"version":3,"sources":["component/Social.js","component/ID.js","crypto.js","component/Register.js","component/Login.js","component/Edit.js","App.js","index.js"],"names":["Social","props","text","color","type","href","className","style","backgroundColor","ID","me","useParams","username","useState","setUsername","name","setName","blurb","setBlurb","setKey","useEffect","fetch","then","res","json","code","window","location","key_decrypt","err","opacity","value","origin","qrStyle","bgColor","fgColor","logoImage","logoWidth","logoOpacity","display","to","encrypt","pass","message","salt","forge","random","getBytesSync","derivedBytes","pbe","opensslDeriveBytes","keySize","buffer","util","createBuffer","key","getBytes","iv","cipher","createCipher","start","update","finish","output","putBytes","putBuffer","Yes","textAlign","width","No","Register","password","setPassword","reqLength","length","reqCase","test","reqSpecial","padding","placeholder","onChange","e","target","onClick","pki","rsa","generateKeyPair","bits","workers","keypair","console","error","publicKeyToPem","publicKey","key_encrypt","privateKeyToPem","privateKey","log","axios","post","data","alert","Login","key_encryption","privateKeyFromPem","input","decipher","createDecipher","toString","decrypt","md","sha1","create","signature","sign","catch","Edit","loaded","setLoaded","fontWeight","fontSize","marginTop","App","src","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e842ac54.chunk.js","sourcesContent":["function Social(props) {\n    const { text, color, type } = props;\n\n    return (\n        <a href='/'>\n            <div className='social' style={{ backgroundColor: color }}>\n                <span>{ text }</span>\n                <i className={ `fab fa-${type}` }></i>\n            </div>\n        </a>\n    );\n}\n\nexport default Social;\n","import { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { QRCode } from 'react-qrcode-logo';\n//import forge from 'node-forge';\n\nimport Social from './Social';\n\nfunction ID() {\n    const me = useParams().username == 'me';\n    const [ username, setUsername ] = useState(useParams().username);\n    const [ name, setName ] = useState();\n    const [ blurb, setBlurb ] = useState();\n    const [ key, setKey ] = useState();\n\n    const [ code, setCode ] = useState();\n\n    useEffect(() => {\n        fetch(`/api/id/${username}`)\n        .then(res => res.json())\n        .then(\n            (res) => {\n                if (res.code)\n                    window.location.href = '/';\n\n                setUsername(res.username);\n                setName(res.name);\n                setBlurb(res.blurb);\n                setKey(res.key_decrypt);\n            },\n            (err) => {\n                window.location.href = '/';\n            }\n        );\n    }, []);\n\n    //<i className='soft' style={{ wordBreak: 'break-all' }}>{ key }</i>\n\n    return (\n        <>\n            <div style={{ opacity: name ? 1 : 0 }} className='box'>\n                <div className='qr'>\n                    <QRCode\n                        value={ `${window.location.origin}/id/${username}` }\n                        qrStyle='dots' bgColor='#1c1f28' fgColor='#f8faf9'\n                        logoImage='/logo.png' logoWidth='40' logoOpacity='0.8' />\n                </div>\n                <div>\n                    <h1>{ name }</h1>\n                    <p>{ blurb }</p>\n                    <div>\n                        <div style={{ display: 'inline-block' }}>\n                            <Social\n                                text='Jihoon Yang (@lanpai)'\n                                color='#1DA1F2' type='twitter' />\n                            <Social\n                                text='Jihoon Yang (@lanpai)'\n                                color='#0366d6' type='github' />\n                            <Social\n                                text='Jihoon Yang'\n                                color='#4267B2' type='facebook' />\n                        </div>\n                    </div>\n                    { me &&\n                        <Link to='/edit'>\n                            <small className='soft'>Edit your profile</small>\n                        </Link>\n                    }\n                </div>\n            </div>\n            <div style={{\n                display: me ? 'flex' : 'none',\n                opacity: name ? 1 : 0\n            }} className='box'>\n                <div className='qr'>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default ID;\n","import forge from 'node-forge';\n\nconst keySize = 24;\nconst ivSize = 8;\n\nfunction encrypt(pass, message) {\n    const salt = forge.random.getBytesSync(8);\n    const derivedBytes = forge.pbe.opensslDeriveBytes(\n        pass, salt, keySize + ivSize\n    );\n    const buffer = forge.util.createBuffer(derivedBytes);\n    const key = buffer.getBytes(keySize);\n    const iv = buffer.getBytes(ivSize);\n\n    const cipher = forge.cipher.createCipher('3DES-CBC', key);\n    cipher.start({ iv });\n    cipher.update(forge.util.createBuffer(message));\n    cipher.finish();\n\n    const output = forge.util.createBuffer();\n\n    if (salt !== null) {\n        output.putBytes('Salted__');\n        output.putBytes(salt);\n    }\n    output.putBuffer(cipher.output);\n\n    return output.getBytes();\n}\n\nfunction decrypt(pass, message) {\n    const input = forge.util.createBuffer(message);\n\n    input.getBytes('Salted__'.length);\n\n    const salt = input.getBytes(8);\n\n    const derivedBytes = forge.pbe.opensslDeriveBytes(\n        pass, salt, keySize + ivSize);\n    const buffer = forge.util.createBuffer(derivedBytes);\n    const key = buffer.getBytes(keySize);\n    const iv = buffer.getBytes(ivSize);\n\n    const decipher = forge.cipher.createDecipher('3DES-CBC', key);\n    decipher.start({ iv });\n    decipher.update(input);\n    decipher.finish();\n\n    return decipher.output.toString();\n}\n\nexport {\n    encrypt, decrypt\n};\n","import { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport forge from 'node-forge';\nimport axios from 'axios';\n\nimport { encrypt, decrypt } from '../crypto';\n\nfunction Yes() {\n    return (\n        <i style={{ textAlign: 'center', width: 16 }} className='fas fa-check'></i>\n    );\n}\nfunction No() {\n    return (\n        <i style={{ textAlign: 'center', width: 16 }} className='fas fa-times'></i>\n    );\n}\n\nfunction Register() {\n    const [ username, setUsername ] = useState('');\n    const [ password, setPassword ] = useState('');\n\n    const handleUsernameChange = (e) => { setUsername(e.target.value); };\n    const handlePasswordChange = (e) => { setPassword(e.target.value); };\n\n    const reqLength = password.length >= 14;\n    const reqCase = /(?=.*[a-z])(?=.*[A-Z])/.test(password);\n    const reqSpecial = /(?=.*[-+_!@#$%^&*., ?])/.test(password);\n\n    const handleRegister = (e) => {\n        if (!username) return alert('Username is required!');\n        if (!reqLength) return alert('Must contain at least 14 characters!');\n        if (!reqCase) return alert('Must have both capital and lowercase letters');\n        if (!reqSpecial) return alert('Must contain at least 1 symbol');\n\n        forge.pki.rsa.generateKeyPair(\n            { bits: 2048, workers: 2 },\n            (err, keypair) => {\n                if (err) console.error(err);\n\n                const key_decrypt = forge.pki.publicKeyToPem(keypair.publicKey);\n                const key_encrypt = forge.pki.privateKeyToPem(keypair.privateKey);\n\n                console.log(key_decrypt);\n                console.log(key_encrypt);\n\n                axios.post('/api/register', {\n                    username,\n                    key_decrypt,\n                    key_encrypt: encrypt(password, key_encrypt)\n                })\n                .then(res => {\n                    switch (res.data.code) {\n                        case 0:\n                            window.location.href = '/login';\n                            break;\n                        default:\n                            alert(res.data.message);\n                            break;\n                    }\n                });\n            }\n        );\n    };\n\n    return (\n        <div className='box'>\n            <div>\n                <h2>Create your repul.ink account</h2>\n                <div style={{ padding: 5 }}>\n                    <p>{reqLength ? <Yes/> : <No/>} Must contain at least 14 characters</p>\n                    <p>{reqCase ? <Yes/> : <No/>} Must have both capital and lowercase letters</p>\n                    <p>{reqSpecial ? <Yes/> : <No/>} Must contain at least 1 symbol</p>\n                    <input\n                        type='text' placeholder='Username'\n                        value={ username } onChange={ handleUsernameChange } />\n                    <input\n                        type='password' placeholder='Password'\n                        value={ password } onChange={ handlePasswordChange } />\n                    <button onClick={ handleRegister }>Register</button>\n                    <Link to='/login'>\n                        <small className='soft'>Already have an account?</small>\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Register;\n","import { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport forge from 'node-forge';\nimport axios from 'axios';\n\nimport { encrypt, decrypt } from '../crypto';\n\nfunction Yes() {\n    return (\n        <i style={{ textAlign: 'center', width: 16 }} className='fas fa-check'></i>\n    );\n}\nfunction No() {\n    return (\n        <i style={{ textAlign: 'center', width: 16 }} className='fas fa-times'></i>\n    );\n}\n\nfunction Login() {\n    const [ username, setUsername ] = useState('');\n    const [ password, setPassword ] = useState('');\n\n    const handleUsernameChange = (e) => { setUsername(e.target.value); };\n    const handlePasswordChange = (e) => { setPassword(e.target.value); };\n\n    const reqLength = password.length >= 14;\n    const reqCase = /(?=.*[a-z])(?=.*[A-Z])/.test(password);\n    const reqSpecial = /(?=.*[-+_!@#$%^&*., ?])/.test(password);\n\n    const handleLogin = (e) => {\n        if (!username) return alert('Username is missing!');\n        if (!reqLength) return alert('Password contains at least 14 characters!');\n        if (!reqCase) return alert('Password contains both capital and lowercase letters');\n        if (!reqSpecial) return alert('Password contains at least 1 symbol');\n\n        axios.post('/api/prepareLogin', { username })\n        .then(res => {\n            switch (res.data.code) {\n                case 0:\n                    try {\n                        const key_encryption = forge.pki.privateKeyFromPem(decrypt(\n                            password, res.data.key_encryption));\n\n                        const md = forge.md.sha1.create();\n                        md.update(username, 'utf8');\n                        const signature = key_encryption.sign(md);\n\n                        axios.post('/api/login', { username, signature })\n                        .then(res => {\n                            window.location.href = '/id/me';\n                        })\n                        .catch(err => {\n                            alert('Unknown error!');\n                        });\n                    }\n                    catch (err) {\n                        alert('Invalid password!');\n                    }\n                    break;\n                default:\n                    alert(res.data.message);\n                    break;\n            }\n        });\n    };\n\n    return (\n        <div className='box'>\n            <div>\n                <h2>Login to your repul.ink account</h2>\n                <div style={{ padding: 5 }}>\n                    <p>{reqLength ? <Yes/> : <No/>} Password contains at least 14 characters</p>\n                    <p>{reqCase ? <Yes/> : <No/>} Password contains both capital and lowercase letters</p>\n                    <p>{reqSpecial ? <Yes/> : <No/>} Password contains at least 1 symbol</p>\n                    <input\n                        type='text' placeholder='Username'\n                        value={ username } onChange={ handleUsernameChange } />\n                    <input\n                        type='password' placeholder='Password'\n                        value={ password } onChange={ handlePasswordChange } />\n                    <button onClick={ handleLogin }>Login</button>\n                    <Link to='/register'>\n                        <small className='soft'>Don't have an account?</small>\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Login;\n","import { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\n\nimport axios from 'axios';\n\nimport Social from './Social';\n\nfunction Edit() {\n    const [ loaded, setLoaded ] = useState(false);\n    const [ username, setUsername ] = useState();\n    const [ name, setName ] = useState();\n    const [ blurb, setBlurb ] = useState();\n    const [ key, setKey ] = useState();\n\n    const handleNameChange = (e) => { setName(e.target.value); };\n    const handleBlurbChange = (e) => { setBlurb(e.target.value); };\n\n    useEffect(() => {\n        fetch(`/api/id/me`)\n        .then(res => res.json())\n        .then(\n            (res) => {\n                if (res.code)\n                    window.location.href = '/';\n\n                setLoaded(true);\n                setUsername(res.username);\n                setName(res.name);\n                setBlurb(res.blurb);\n                setKey(res.key_decrypt);\n            },\n            (err) => {\n                window.location.href = '/';\n            }\n        );\n    }, []);\n\n    const handleApply = () => {\n        axios.post('/api/edit', { name, blurb })\n        .then(res => {\n            switch (res.data.code) {\n                case 0:\n                    alert('Successfully updated profile.');\n                    break;\n                default:\n                    alert(res.data.message);\n                    break;\n            }\n        });\n    }\n\n    return (\n        <div style={{ opacity: loaded ? 1 : 0 }} className='box'>\n            <div>\n                <input\n                    style={{\n                        color: 'var(--highlight)',\n                        fontWeight: 700, fontSize: 32,\n                        marginTop: 0\n                    }}\n                    type='text' placeholder='Display Name'\n                    value={ name } onChange={ handleNameChange } />\n                <input\n                    style={{\n                        color: 'var(--foreground)',\n                        fontSize: 16,\n                        marginTop: 0\n                    }}\n                    type='text' placeholder='Blurb'\n                    value={ blurb } onChange={ handleBlurbChange } />\n                <div>\n                    <div style={{ display: 'inline-block' }}>\n                        <Social text='Connect Twitter' color='#1DA1F2' type='twitter' />\n                        <Social text='Connect GitHub' color='#0366d6' type='github' />\n                        <Social text='Connect Facebook' color='#4267B2' type='facebook' />\n                    </div>\n                </div>\n                <button onClick={ handleApply }>Apply</button>\n                <Link to='/id/me'>\n                    <small className='soft'>View your profile</small>\n                </Link>\n            </div>\n        </div>\n    );\n}\n\nexport default Edit;\n","import {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    Redirect\n} from 'react-router-dom';\n\nimport ID from './component/ID';\nimport Register from './component/Register';\nimport Login from './component/Login';\nimport Edit from './component/Edit';\n\nfunction App() {\n    return (\n        <Router>\n            <div className='header'>\n                <Link to='/'>\n                    <h1>\n                        <img src='/logo192.png' />\n                        repul.ink\n                    </h1>\n                </Link>\n            </div>\n            <div className='center'>\n                <Switch>\n                    <Route path='/register'>\n                        <Register />\n                    </Route>\n                    <Route path='/login'>\n                        <Login />\n                    </Route>\n                    <Route path='/id/:username'>\n                        <ID />\n                    </Route>\n                    <Route path='/edit'>\n                        <Edit />\n                    </Route>\n                    <Route path='/' exact>\n                        <h1>Under Construction</h1>\n                    </Route>\n\n                    <Route>\n                        <div>\n                            <h1>Page not found</h1>\n                            <p>Seems you've taken a wrong turn!</p>\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        </Router>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}